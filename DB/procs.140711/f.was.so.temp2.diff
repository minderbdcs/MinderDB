215a216
> 
258a260,263
> /*
> DECLARE VARIABLE WK_H_LEGACY_LEDGER_ADMIN_FEE_CODE    VARCHAR(40);  field name too long
> DECLARE VARIABLE WK_H_LEGACY_LEDGER_SALE_SSN_ID_CODE  VARCHAR(40);  field name too long
> */
325d329
< DECLARE VARIABLE WK_POST_CODE_RECORD_ID2              INTEGER;
555a560,563
> /*
>    WK_H_LEGACY_LEDGER_ADMIN_FEE_CODE    VARCHAR(40);  field name too long
>    WK_H_LEGACY_LEDGER_SALE_SSN_ID_CODE  VARCHAR(40);  field name too long
> */
825c833,835
<    SELECT UGLY_CARRIER_ID  FROM CONTROL INTO :WK_CN_UGLY_ID;
---
>    SELECT UGLY_CARRIER_ID  
>       FROM CONTROL 
>       INTO :WK_CN_UGLY_ID;
827,845c837,842
<    WK_POST_CODE_RECORD_ID2 = NULL;
<    WK_POST_CODE_CMD = 'SELECT FIRST 1 RECORD_ID FROM POSTCODE_DEPOT WHERE ' ||
< ' COUNTRY = ' || "'" || :WK_REAL_COUNTRY || "'" || 
< ' AND STATE = ' || "'" || :WK_P_STATE || "'" || 
< ' AND POST_CODE = ' || "'" || :WK_P_POST_CODE || "'" || 
< ' AND ' || WK_CARRIER_POST_CODE_FIELD || ' IS NOT NULL ' ;
<    IF (WK_POST_CODE_CMD IS NOT NULL) THEN
<    BEGIN
<       EXECUTE STATEMENT WK_POST_CODE_CMD INTO :WK_POST_CODE_RECORD_ID2;
<    END
<    IF (WK_POST_CODE_RECORD_ID2 IS NOT NULL) THEN
<    BEGIN
<        WK_POST_CODE_RECORD_ID = :WK_POST_CODE_RECORD_ID2;
<    END
<    ELSE
<    BEGIN
<       SELECT FIRST 1 RECORD_ID FROM POSTCODE_DEPOT WHERE COUNTRY = :WK_REAL_COUNTRY AND STATE = :WK_P_STATE AND POST_CODE = :WK_P_POST_CODE
<       INTO :WK_POST_CODE_RECORD_ID;
<    END
---
>    SELECT FIRST 1 RECORD_ID
>    FROM POSTCODE_DEPOT
>    WHERE COUNTRY = :WK_REAL_COUNTRY
>          AND STATE = :WK_P_STATE
>          AND POST_CODE = :WK_P_POST_CODE
>    INTO :WK_POST_CODE_RECORD_ID;
