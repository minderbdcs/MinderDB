COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;

ALTER PROCEDURE RPT_DAILY_2_A_DATA (THISSTART TIMESTAMP,
THISEND TIMESTAMP)
RETURNS (QTYTOTAL INTEGER,
PROD_ID VARCHAR(50) CHARACTER SET NONE,
SHORT_DESC VARCHAR(50) CHARACTER SET NONE)
AS 

BEGIN
  /* PROCEDURE BODY */
  FOR

 SELECT SUM(ISSN.PREV_QTY), ISSN.PROD_ID, PROD_PROFILE.SHORT_DESC
 FROM ISSN
 LEFT OUTER  JOIN PROD_PROFILE ON ISSN.PROD_ID = PROD_PROFILE.PROD_ID
 WHERE (ISSN.DESPATCHED_DATE BETWEEN ZEROTIME(:THISSTART) AND MAXTIME(:THISEND))
 GROUP BY ISSN.PROD_ID,PROD_PROFILE.SHORT_DESC

  INTO
  :QTYTOTAL,
  :PROD_ID,
  :SHORT_DESC
  DO
  BEGIN
  SUSPEND;
  END
END ^

SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
