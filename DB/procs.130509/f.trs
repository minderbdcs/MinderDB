COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 

CREATE OR ALTER TRIGGER RUN_TRANSACTION_TRLO FOR TRANSACTIONS 
ACTIVE AFTER INSERT POSITION 36 
AS
DECLARE VARIABLE WK_AUTORUN INTEGER;
DECLARE VARIABLE WK_WH_ID CHAR(2);
DECLARE VARIABLE WK_LOCN_ID VARCHAR(10);
BEGIN
 WK_AUTORUN = GEN_ID(AUTOEXEC_TRANSACTIONS,0); 
 IF (WK_AUTORUN = 1) THEN
 BEGIN
  IF (NEW.TRN_TYPE = 'TRLO') THEN
  BEGIN
    WK_WH_ID = NEW.WH_ID;
    IF (WK_WH_ID IS NOT NULL) THEN
    BEGIN
       WK_WH_ID = UPPER(WK_WH_ID);
    END
    WK_LOCN_ID = NEW.LOCN_ID;
    IF (WK_LOCN_ID IS NOT NULL) THEN
    BEGIN
       WK_LOCN_ID = UPPER(WK_LOCN_ID);
    END
   EXECUTE PROCEDURE PC_TRLO_TRLI
    NEW.RECORD_ID ,
    WK_WH_ID,
    WK_LOCN_ID,
    NEW.OBJECT,
    NEW.TRN_TYPE,
    NEW.TRN_CODE,
    NEW.TRN_DATE,
    NEW.REFERENCE,
    NEW.QTY,
    NEW.PERSON_ID,
    NEW.DEVICE_ID;
   /* EXECUTE PROCEDURE TRAN_ARCHIVE; */
  END
 END
END ^

CREATE OR ALTER TRIGGER RUN_TRANSACTION_TRLI FOR TRANSACTIONS 
ACTIVE AFTER INSERT POSITION 37 
AS
DECLARE VARIABLE WK_AUTORUN INTEGER;
DECLARE VARIABLE WK_WH_ID CHAR(2);
DECLARE VARIABLE WK_LOCN_ID VARCHAR(10);
BEGIN
 WK_AUTORUN = GEN_ID(AUTOEXEC_TRANSACTIONS,0); 
 IF (WK_AUTORUN = 1) THEN
 BEGIN
  IF (NEW.TRN_TYPE = 'TRLI') THEN
  BEGIN
    WK_WH_ID = NEW.WH_ID;
    IF (WK_WH_ID IS NOT NULL) THEN
    BEGIN
       WK_WH_ID = UPPER(WK_WH_ID);
    END
    WK_LOCN_ID = NEW.LOCN_ID;
    IF (WK_LOCN_ID IS NOT NULL) THEN
    BEGIN
       WK_LOCN_ID = UPPER(WK_LOCN_ID);
    END
   EXECUTE PROCEDURE PC_TRLO_TRLI
    NEW.RECORD_ID ,
    WK_WH_ID,
    WK_LOCN_ID,
    NEW.OBJECT,
    NEW.TRN_TYPE,
    NEW.TRN_CODE,
    NEW.TRN_DATE,
    NEW.REFERENCE,
    NEW.QTY,
    NEW.PERSON_ID,
    NEW.DEVICE_ID;
   /* EXECUTE PROCEDURE TRAN_ARCHIVE; */
  END
 END
END ^

CREATE OR ALTER TRIGGER RUN_TRANSACTION_TROL FOR TRANSACTIONS 
ACTIVE AFTER INSERT POSITION 38 
AS
DECLARE VARIABLE WK_AUTORUN INTEGER;
DECLARE VARIABLE WK_WH_ID CHAR(2);
DECLARE VARIABLE WK_LOCN_ID VARCHAR(10);
BEGIN
 WK_AUTORUN = GEN_ID(AUTOEXEC_TRANSACTIONS,0); 
 IF (WK_AUTORUN = 1) THEN
 BEGIN
  IF (NEW.TRN_TYPE = 'TROL') THEN
  BEGIN
    WK_WH_ID = NEW.WH_ID;
    IF (WK_WH_ID IS NOT NULL) THEN
    BEGIN
       WK_WH_ID = UPPER(WK_WH_ID);
    END
    WK_LOCN_ID = NEW.LOCN_ID;
    IF (WK_LOCN_ID IS NOT NULL) THEN
    BEGIN
       WK_LOCN_ID = UPPER(WK_LOCN_ID);
    END
   EXECUTE PROCEDURE PC_TROL_TRIL
    NEW.RECORD_ID ,
    WK_WH_ID,
    WK_LOCN_ID,
    NEW.OBJECT,
    NEW.TRN_TYPE,
    NEW.TRN_CODE,
    NEW.TRN_DATE,
    NEW.REFERENCE,
    NEW.QTY,
    NEW.PERSON_ID,
    NEW.DEVICE_ID;
   /* EXECUTE PROCEDURE TRAN_ARCHIVE; */
  END
 END
END ^

CREATE OR ALTER TRIGGER RUN_TRANSACTION_TRIL FOR TRANSACTIONS 
ACTIVE AFTER INSERT POSITION 39 
AS
DECLARE VARIABLE WK_AUTORUN INTEGER;
DECLARE VARIABLE WK_WH_ID CHAR(2);
DECLARE VARIABLE WK_LOCN_ID VARCHAR(10);
BEGIN
 WK_AUTORUN = GEN_ID(AUTOEXEC_TRANSACTIONS,0); 
 IF (WK_AUTORUN = 1) THEN
 BEGIN
  IF (NEW.TRN_TYPE = 'TRIL') THEN
  BEGIN
    WK_WH_ID = NEW.WH_ID;
    IF (WK_WH_ID IS NOT NULL) THEN
    BEGIN
       WK_WH_ID = UPPER(WK_WH_ID);
    END
    WK_LOCN_ID = NEW.LOCN_ID;
    IF (WK_LOCN_ID IS NOT NULL) THEN
    BEGIN
       WK_LOCN_ID = UPPER(WK_LOCN_ID);
    END
   EXECUTE PROCEDURE PC_TROL_TRIL
    NEW.RECORD_ID ,
    WK_WH_ID,
    WK_LOCN_ID,
    NEW.OBJECT,
    NEW.TRN_TYPE,
    NEW.TRN_CODE,
    NEW.TRN_DATE,
    NEW.REFERENCE,
    NEW.QTY,
    NEW.PERSON_ID,
    NEW.DEVICE_ID;
   /* EXECUTE PROCEDURE TRAN_ARCHIVE; */
  END
 END
END ^



SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
