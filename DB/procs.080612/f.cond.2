COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 

CREATE PROCEDURE UPDATE_SSN_PRODUCT_COND_STATUS (SSN_ID VARCHAR(20) CHARACTER SET NONE,
CODE VARCHAR(1) CHARACTER SET NONE,
ORIGINAL VARCHAR(1) CHARACTER SET NONE,
NOFAULT CHAR(1) CHARACTER SET NONE)
AS 

  DECLARE VARIABLE REC_EXIST INTEGER;
  DECLARE VARIABLE WK_GLOBAL VARCHAR(30);
BEGIN

  IF (:ORIGINAL = 'S') THEN
  BEGIN
     IF (:CODE = 'A') THEN
     BEGIN
        EXECUTE PROCEDURE GET_GLOBAL_CONDITION 1, :NOFAULT RETURNING_VALUES :WK_GLOBAL;
        UPDATE SSN
        SET OTHER1 = :WK_GLOBAL
        WHERE SSN_ID = :SSN_ID;
     END
     ELSE IF (:CODE = 'B') THEN
     BEGIN
        EXECUTE PROCEDURE GET_GLOBAL_CONDITION 2, :NOFAULT RETURNING_VALUES :WK_GLOBAL;
        UPDATE SSN
        SET OTHER2 = :WK_GLOBAL
        WHERE SSN_ID = :SSN_ID;
     END
     ELSE IF (:CODE = 'C') THEN
     BEGIN
        EXECUTE PROCEDURE GET_GLOBAL_CONDITION 3, :NOFAULT RETURNING_VALUES :WK_GLOBAL;
        UPDATE SSN
        SET OTHER3 = :WK_GLOBAL
        WHERE SSN_ID = :SSN_ID;
     END
     ELSE IF (:CODE = 'D') THEN
     BEGIN
        EXECUTE PROCEDURE GET_GLOBAL_CONDITION 4, :NOFAULT RETURNING_VALUES :WK_GLOBAL;
        UPDATE SSN
        SET OTHER4 = :WK_GLOBAL
        WHERE SSN_ID = :SSN_ID;
     END
     ELSE IF (:CODE = 'E') THEN
     BEGIN
        EXECUTE PROCEDURE GET_GLOBAL_CONDITION 5, :NOFAULT RETURNING_VALUES :WK_GLOBAL;
        UPDATE SSN
        SET OTHER5 = :WK_GLOBAL
        WHERE SSN_ID = :SSN_ID;
     END
  END
END ^



SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
