
CREATE TABLE SYS_SCREEN_COLOUR (RECORD_ID INTEGER NOT NULL,
        SSC_COLOUR_TEST_NAME CODE,
        SSC_SEQUENCE SEQUENCE_NO,
        SSC_NOTES NOTES,
        SSC_STATUS STATUS,
        SSC_OPERATOR CODE,
        SSC_VALUE1 CODE,
        SSC_VALUE2 CODE,
        SSC_COLOUR_NAME CODE,
        SS_NAME CODE NOT NULL,
        LAST_UPDATE_DATE LAST_UPDATE_DATE,
        LAST_UPDATE_BY USER_ID,
PRIMARY KEY (RECORD_ID));


COMMENT ON TABLE SYS_SCREEN_COLOUR IS "
set a colour for a field in sys_screen_var

so nominate a value in the result set

then for a range of values
or < a value
or > a value   

add a field ssv_colour_test_field and ssv_colour_test

then a new table for the colours and conditions
 have a less than and greater than value operators

ie operator and test value 1 eg operator <
   operator and 2 test values  eg operator between

so sys_screen_colour table
";

ALTER TABLE SYS_SCREEN_VAR ADD SSV_COLOUR_TEST_NAME CODE;
ALTER TABLE SYS_SCREEN_VAR ADD SSV_COLOUR_TEST_FIELD CODE;

CREATE GENERATOR SYS_SCREEN_COLOUR_ID_GEN;
CREATE INDEX SYS_SCREEN_COLOUR_NAME_IDX ON SYS_SCREEN_COLOUR (SSC_COLOUR_TEST_NAME);
CREATE INDEX SYS_SCREEN_COLOUR_SSNAME_IDX ON SYS_SCREEN_COLOUR (SS_NAME);

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 
CREATE TRIGGER ADD_SYS_SCREEN_COLOUR FOR SYS_SCREEN_COLOUR 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_COLOUR_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER UPD_SYS_SCREEN_COLOUR FOR SYS_SCREEN_COLOUR
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_COLOUR_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;

