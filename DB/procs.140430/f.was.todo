dsas for loop goes back so move lookups to select of for.

dsps use out despatch

