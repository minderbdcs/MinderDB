COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;

CREATE GENERATOR REPORTS_SCHEDULE_ID_GEN^

CREATE OR ALTER TRIGGER ADD_REPORTS_SCHEDULE FOR REPORTS_SCHEDULE
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(REPORTS_SCHEDULE_ID_GEN,1);
   END
   NEW.REPS_LAST_UPDATED = 'NOW';
   NEW.REPS_CREATED_DATE = 'NOW';
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;

 alter table REPORTS_SCHEDULE add  CONSTRAINT REPS_SCHEDULE_CK_OUT_FOLDER CHECK (REPS_OUT_FOLDER  LIKE '%/' || REPS_WH_ID || '/'); 
