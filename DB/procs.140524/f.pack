CREATE DOMAIN  PC_POPULATE_OUT_SSCC_METHOD VARCHAR(40)
         DEFAULT 'PRODUCT ORDER DELIVER TO'
         CHECK (VALUE IN ('PRODUCT ORDER DELIVER TO','ORDER DELIVER TO')) ;


CREATE TABLE PACK_CUSTOMER (RECORD_ID INTEGER NOT NULL,
        PC_CUSTOMER_EDI_NO EDI_NO NOT NULL,
        COMPANY_ID COMPANY NOT NULL,
        PC_POPULATE_OUT_SSCC_METHOD PC_POPULATE_OUT_SSCC_METHOD NOT NULL,
        PC_NOTES NOTES,
        LAST_UPDATE_DATE LAST_UPDATE_DATE,
        LAST_UPDATE_BY USER_ID,
PRIMARY KEY (RECORD_ID));

CREATE GENERATOR PACK_CUSTOMER_ID_GEN; 

CREATE UNIQUE INDEX PACK_CUSTOMER_EDI_IDX ON PACK_CUSTOMER (PC_CUSTOMER_EDI_NO, COMPANY_ID);

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 

CREATE TRIGGER ADD_PACK_CUSTOMER FOR PACK_CUSTOMER 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(PACK_CUSTOMER_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER MOD_PACK_CUSTOMER FOR PACK_CUSTOMER 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(PACK_CUSTOMER_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
