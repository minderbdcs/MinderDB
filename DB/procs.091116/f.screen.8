alter table sys_screen_table add 	WH_ID WH_ID;
alter table sys_screen_var   add 	WH_ID WH_ID;


CREATE TABLE SYS_SCREEN_ORDER (RECORD_ID INTEGER NOT NULL,
        SSO_ORDER CODE_255,
        SSO_SEQUENCE SEQUENCE_NO,
        SSO_NOTES NOTES,
        SS_NAME CODE NOT NULL,
        SSO_USER_TYPE CODE,
        SSO_DEVICE_TYPE DEVICE_TYPE,
        SSO_ORDER_STATUS STATUS,
        WH_ID WH_ID,
        COMPANY_ID COMPANY,
        LAST_UPDATE_DATE LAST_UPDATE_DATE,
        LAST_UPDATE_BY USER_ID,
PRIMARY KEY (RECORD_ID));

CREATE GENERATOR SYS_SCREEN_ORDER_ID_GEN;
CREATE INDEX SYS_SCREEN_ORDER_NAME_IDX ON SYS_SCREEN_ORDER (SSO_ORDER);
CREATE INDEX SYS_SCREEN_ORDER_SSNAME_IDX ON SYS_SCREEN_ORDER (SS_NAME);

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 
DROP   TRIGGER ADD_SYS_SCREEN ^
DROP   TRIGGER ADD_SYS_SCREEN_TABLE ^
DROP   TRIGGER ADD_SYS_SCREEN_VAR ^
COMMIT^
ALTER TABLE SYS_SCREEN_TABLE DROP LAST_UPDATE_DATE^
ALTER TABLE SYS_SCREEN_TABLE DROP LAST_UPDATE_BY  ^
COMMIT^
ALTER TABLE SYS_SCREEN_VAR   DROP LAST_UPDATE_DATE^
ALTER TABLE SYS_SCREEN_VAR   DROP LAST_UPDATE_BY  ^
COMMIT^
ALTER TABLE SYS_SCREEN_TABLE ADD  LAST_UPDATE_DATE LAST_UPDATE_DATE^
ALTER TABLE SYS_SCREEN_TABLE ADD  LAST_UPDATE_BY USER_ID  ^
COMMIT^
ALTER TABLE SYS_SCREEN_VAR   ADD  LAST_UPDATE_DATE LAST_UPDATE_DATE^
ALTER TABLE SYS_SCREEN_VAR   ADD  LAST_UPDATE_BY USER_ID  ^
COMMIT^


CREATE TRIGGER ADD_SYS_SCREEN_ORDER FOR SYS_SCREEN_ORDER 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_ORDER_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER UPD_SYS_SCREEN_ORDER FOR SYS_SCREEN_ORDER 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_ORDER_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^


CREATE TRIGGER ADD_SYS_SCREEN FOR SYS_SCREEN 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER ADD_SYS_SCREEN_TABLE FOR SYS_SCREEN_TABLE 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_TABLE_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER ADD_SYS_SCREEN_VAR FOR SYS_SCREEN_VAR 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_VAR_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^



CREATE TRIGGER MOD_SYS_SCREEN FOR SYS_SCREEN 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER MOD_SYS_SCREEN_TABLE FOR SYS_SCREEN_TABLE 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_TABLE_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER MOD_SYS_SCREEN_VAR FOR SYS_SCREEN_VAR 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_VAR_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
