/*
	have a new table grn_order
	grn
	order no
	grn_label_no (calced a G followed by the next generated no)
	company (person)
	supplier (person)
	uniqueness is 
	the grn_label_no
	or order_no + company ***
	I shall use order_no as unique
*/

CREATE TABLE GRN_ORDER (GRN GRN NOT NULL,
        ORDER_NO ORDER_NO NOT NULL,
        GRN_LABEL_NO ORDER_NO NOT NULL,
        COMPANY_ID COMPANY,
        SUPPLIER_ID PERSON,
        CREATE_DATE CREATE_DATE,
        CREATED_BY USER_ID,
PRIMARY KEY (GRN_LABEL_NO));

CREATE INDEX GRN_ORDER_GRN_IDX ON GRN_ORDER(GRN);
CREATE INDEX GRN_ORDER_ORDER_IDX ON GRN_ORDER(ORDER_NO);

CREATE GENERATOR GRN_LABEL_GEN;
CREATE GENERATOR GRN_LABEL_START;
CREATE GENERATOR GRN_LABEL_STOP;
SET GENERATOR GRN_LABEL_START TO 0;
SET GENERATOR GRN_LABEL_STOP TO 999999;
INSERT INTO PARAM(DATA_ID,MAX_LENGTH,DATA_TYPE,FIXED_LENGTH,SYMBOLOGY_PREFIX,DATA_EXPRESSION)
VALUES('GRNORDER','6','1','T',']F0;;','[0-9]*');

