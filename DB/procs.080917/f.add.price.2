COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 
DROP TRIGGER INSERT_SSN_PO_PRICE ^
COMMIT^

CREATE TRIGGER INSERT_SSN_PO_PRICE FOR SSN 
ACTIVE BEFORE INSERT POSITION 0 
AS
DECLARE VARIABLE WK_QTY INTEGER;
DECLARE VARIABLE WK_QTYF FLOAT;
DECLARE VARIABLE WK_REASON VARCHAR(40);
BEGIN
   IF (NOT NEW.PURCHASE_PRICE IS NULL) THEN
   BEGIN
      IF (NEW.LOAN_COST_BASE IS NULL) THEN
      BEGIN
         NEW.LOAN_COST_BASE = NEW.PURCHASE_PRICE;
      END
      IF (NEW.LOAN_COST_BASE = 0 ) THEN
      BEGIN
         NEW.LOAN_COST_BASE = NEW.PURCHASE_PRICE;
      END
   END
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
