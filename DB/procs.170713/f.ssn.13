COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;


CREATE OR ALTER TRIGGER STOP_DELETE_SSN FOR SSN 
ACTIVE BEFORE DELETE POSITION 0 
AS
DECLARE VARIABLE WK_OK INTEGER;
BEGIN
   IF ( (OLD.STATUS_SSN = 'DX') OR
       (OLD.STATUS_SSN = 'DI') OR
       (OLD.STATUS_SSN = 'CN') ) THEN
   BEGIN
      WK_OK = 1;
   END
   ELSE
   BEGIN
      WK_OK = 0;
      EXCEPTION NO_DELETE_SSN;
   END
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
