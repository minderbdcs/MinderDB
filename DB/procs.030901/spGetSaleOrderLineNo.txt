CREATE PROCEDURE GET_SALE_LINE_NO (
  SALE_ORDER_ID VARCHAR(10)
) RETURNS (
  SALE_ORDER_LINE_NO INTEGER
) AS   
 
  DECLARE VARIABLE LINE_NO INTEGER;  
BEGIN
  LINE_NO = 0; 

  /* Get the maximum number of line no */
  SELECT MAX(SALE_ORDER_LINE_NO)
  FROM SALE_ORDER_LINE
  WHERE SALE_ORDER_ID = :SALE_ORDER_ID  
  INTO :LINE_NO; 
  
  IF (:LINE_NO IS NULL) THEN LINE_NO = 0;

  /* Return the value of line no */
  SALE_ORDER_LINE_NO = LINE_NO + 1;
  
END^
