COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 
ALTER TABLE CONTROL ADD DEFAULT_PURCHASE_STATUS CODE^ 

DROP TRIGGER ADD_PURCHASE_LINE_STATUS ^
COMMIT^

CREATE TRIGGER ADD_PURCHASE_LINE_STATUS FOR PURCHASE_ORDER_LINE 
ACTIVE BEFORE INSERT POSITION 2 
AS
DECLARE VARIABLE WK_ORDER_STATUS VARCHAR(40);
BEGIN
   WK_ORDER_STATUS = '';
   SELECT DEFAULT_PURCHASE_STATUS
   FROM CONTROL
   INTO :WK_ORDER_STATUS ;

   IF (NEW.PO_LINE_STATUS IS NULL) THEN
   BEGIN
      NEW.PO_LINE_STATUS = :WK_ORDER_STATUS;
   END
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
