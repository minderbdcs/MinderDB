CREATE GENERATOR PRODUCT_KIT_LINE_ID_GEN;

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;


CREATE OR ALTER TRIGGER ADD_PRODUCT_KIT_LINE_ID FOR PRODUCT_KIT 
ACTIVE BEFORE INSERT POSITION 0 
AS
BEGIN
  IF (NEW.KIT_LINE_ID IS NULL) THEN
      NEW.KIT_LINE_ID = GEN_ID(PRODUCT_KIT_LINE_ID_GEN, 1);
END ^

CREATE OR ALTER TRIGGER MOD_PRODUCT_KIT_LINE_ID FOR PRODUCT_KIT 
ACTIVE BEFORE UPDATE POSITION 0 
AS
BEGIN
  IF (NEW.KIT_LINE_ID IS NULL) THEN
      NEW.KIT_LINE_ID = GEN_ID(PRODUCT_KIT_LINE_ID_GEN, 1);
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;

update product_kit set last_update_date='NOW' where kit_line_id is null;

