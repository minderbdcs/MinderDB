

CREATE TABLE SYS_SCREEN_PROCEDURE (RECORD_ID INTEGER NOT NULL,
        SSP_NAME DESCR,
        SSP_SEQUENCE SEQUENCE_NO,
        SSP_EXPRESSION CODE_255,
        SSP_ALIAS CODE,
        SSP_NOTES NOTES,
        SSP_OTHER1 CODE ,
        SSP_OTHER2 CODE ,
        SSP_USER_TYPE CODE,
        SSP_DEVICE_TYPE DEVICE_TYPE,
        SSP_FIELD_TYPE STATUS,
        SSP_FIELD_STATUS STATUS,
        SS_NAME CODE NOT NULL,
        SST_TABLE CODE ,
        LAST_UPDATE_DATE LAST_UPDATE_DATE,
        LAST_UPDATE_BY USER_ID,
PRIMARY KEY (RECORD_ID));


CREATE INDEX SYS_SCREEN_PROCEDURE_NAME_IDX ON SYS_SCREEN_PROCEDURE( SSP_NAME);
CREATE INDEX SYS_SCREEN_PROCEDURE_SSNAME_IDX ON SYS_SCREEN_PROCEDURE( SS_NAME, SST_TABLE);

CREATE GENERATOR SYS_SCREEN_PROCEDURE_ID_GEN;

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;


CREATE TRIGGER ADD_SYS_SCREEN_PROCEDURE FOR SYS_SCREEN_PROCEDURE
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_PROCEDURE_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER MOD_SYS_SCREEN_PROCEDURE FOR SYS_SCREEN_PROCEDURE 
ACTIVE BEFORE UPDATE POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_SCREEN_PROCEDURE_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
