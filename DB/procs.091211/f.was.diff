1c1
< Database:  192.168.61.90:minder, User: sysdba
---
> Database:  fpg, User: sysdba
5c5
< /* CREATE DATABASE '192.168.61.90:minder' DEFAULT CHARACTER SET NONE */
---
> /* CREATE DATABASE 'fpg' DEFAULT CHARACTER SET NONE */
2510a2511,2523
>         PICK_LABEL_NO DESPATCH_ID,
>         DESPATCHED_QTY QTY,
>         DESPATCHED_WEIGHT_CALC WEIGHT,
>         DESPATCHED_WEIGHT_ACTUAL WEIGHT,
>         DESPATCH_CARRIER DESPATCH_CARRIER,
>         CARRIER_ACCOUNT_NO VARCHAR(12),
>         DESPATCHED_CARTON_QTY QTY,
>         DESPATCHED_VOL DESPATCHED_VOL,
>         DESPATCHED_PALLET_QTY QTY,
>         PALLET_OWNER PALLET_OWNER,
>         DESPATCH_POST_CODE DESPATCH_POST_CODE,
>         ADDRESS_LABEL_DATE TIMESTAMP,
>         DESPATCH_FINISH DESPATCH_FINISH,
8389,8392d8401
< DECLARE VARIABLE WK_PI_LABEL   VARCHAR(10);
< DECLARE VARIABLE WK_PI_STATUS  CHAR(2);
< DECLARE VARIABLE WK_PI_LINENO  VARCHAR(10);
< DECLARE VARIABLE WK_LINE_LEN   INTEGER;
8405,8416d8413
<    IF (WK_LINE_NO1 IS NOT NULL) THEN
<    BEGIN
<       WK_LINE_NO1 = ALLTRIM(WK_LINE_NO1);
<    END
<    WK_LINE_LEN = STRLEN(WK_LINE_NO1);
<    WHILE (WK_LINE_LEN < 4)
<    DO
<    BEGIN
<       WK_LINE_NO1 = WK_LINE_NO1 || ' ';
<       WK_LINE_LEN = WK_LINE_LEN + 1;
<    END
8483,8485d8479
8489d8482
<            AND PICK_ORDER_LINE_NO = :WK_LINE_NO1
8492,8496d8484
<          INTO :WK_FOUND, :WK_PICK_LABEL;
<          FOR SELECT PICK_LABEL_NO,PICK_LINE_STATUS,PICK_ORDER_LINE_NO 
<          FROM PICK_ITEM
<          WHERE PICK_ORDER = :WK_ORDER
<            AND PROD_ID = :WK_PROD_ID
8498,8518c8486
<          INTO :WK_PI_LABEL, :WK_PI_STATUS, :WK_PI_LINENO
<          DO
<          BEGIN
<          END
<          FOR SELECT PICK_LABEL_NO,PICK_LINE_STATUS,PICK_ORDER_LINE_NO 
<          FROM PICK_ITEM
<          WHERE PICK_ORDER = :WK_ORDER
<            AND PROD_ID = :WK_PROD_ID
<          INTO :WK_PI_LABEL, :WK_PI_STATUS, :WK_PI_LINENO
<          DO
<          BEGIN
<          END
---
>          INTO :WK_FOUND, :WK_PICK_LABEL;
9445d9412
<                      PICK_LINE_STATUS = 'UC',
18501c18472
<       INNER JOIN ISSN ON LOCATION.WH_ID = ISSN.WH_ID AND LOCATION.LOCN_ID = ISSN.LOCN_ID
---
>       INNER JOIN ISSN ON LOCATION.WH_ID = ISSN.WH_ID
> 
39575,39577c39554,39573
< AS
< BEGIN
<    NEW.LAST_UPDATE_DATE = 'NOW';
---
> AS
> BEGIN
>    NEW.LAST_UPDATE_DATE = 'NOW';
>    NEW.PICK_LABEL_NO = NEW.DESPATCH_ID;
>    NEW.DESPATCHED_WEIGHT_CALC = NEW.PICKD_WT_CALC;
>    NEW.DESPATCHED_WEIGHT_ACTUAL = NEW.PICKD_WT_ACTUAL;
>    NEW.DESPATCH_CARRIER = NEW.PICKD_CARRIER_ID;
>    IF (NEW.PICKD_CHARGE_TO = 'R') THEN
>    BEGIN
>       NEW.CARRIER_ACCOUNT_NO = NEW.RECEIVER_ACCOUNT;
>    END
>    ELSE
>    BEGIN
>       NEW.CARRIER_ACCOUNT_NO = NEW.SENDER_ACCOUNT;
>    END
>    NEW.DESPATCHED_CARTON_QTY = NEW.PICKD_CARTON_QTY;
>    NEW.DESPATCHED_PALLET_QTY = NEW.PICKD_PALLET_QTY;
>    NEW.DESPATCHED_VOL = NEW.PICKD_VOL_ACTUAL;
>    NEW.DESPATCH_POST_CODE = NEW.PICKD_POST_CODE;
>    NEW.DESPATCH_FINISH = NEW.PICKD_EXIT;
39794,39797c39790,39791
<       /* NEW.PREV_PREV_PICK_ORDER_LINE_NO = NEW.PREV_PICK_ORDER_LINE_NO;
<       NEW.PREV_PICK_ORDER_LINE_NO = OLD.PICK_ORDER_LINE_NO; */
<       /* stop changing the line no */
<       NEW.PICK_ORDER_LINE_NO = OLD.PICK_ORDER_LINE_NO;
---
>       NEW.PREV_PREV_PICK_ORDER_LINE_NO = NEW.PREV_PICK_ORDER_LINE_NO;
>       NEW.PREV_PICK_ORDER_LINE_NO = OLD.PICK_ORDER_LINE_NO;
40197a40192,40193
>          WK_RESULT = FILE_WRITELN(WK_FILENAME, NEW.PICK_ORDER); 
>          WK_RESULT = FILE_WRITELN(WK_FILENAME, cast(cast('NOW' as timestamp) as char(22))); 
40471a40468,40469
>          WK_RESULT = FILE_WRITELN(WK_FILENAME, NEW.PICK_ORDER); 
>          WK_RESULT = FILE_WRITELN(WK_FILENAME, cast(cast('NOW' as timestamp) as char(22))); 
62115,62117d62112
62222,62223d62206
<                WK_CARRIER_ID = WK_LABEL_TRY;
62316,62318c62297
<      WK_RESPONSE_TXT = WK_CARRIER_ID || '|Processed successfully';
<      /* EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T','Processed successfully'); */
<       EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T',WK_RESPONSE_TXT);
---
>       EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T','Processed successfully');
62351,62353d62329
< DECLARE VARIABLE WK_LOG_FILENAME VARCHAR(255);
< DECLARE VARIABLE WK_RESPONSE_TXT VARCHAR(255);
62445,62446d62410
<                WK_PERSON_ID = WK_LABEL_TRY;
62488,62490c62450
<      WK_RESPONSE_TXT = WK_PERSON_ID || '|Processed successfully';
<      /* EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T','Processed successfully'); */
<       EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T',WK_RESPONSE_TXT);
---
>       EXECUTE PROCEDURE UPDATE_TRAN (WK_RECORD, 'T','Processed successfully');
