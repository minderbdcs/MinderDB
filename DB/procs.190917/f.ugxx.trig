COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;
 

CREATE OR ALTER TRIGGER RUN_TRANSACTION_UGXX FOR TRANSACTIONS 
ACTIVE AFTER INSERT POSITION 161
AS
DECLARE VARIABLE WK_AUTORUN INTEGER;
BEGIN
 WK_AUTORUN = GEN_ID(AUTOEXEC_TRANSACTIONS,0);
 IF (WK_AUTORUN = 1) THEN
 BEGIN
/* IF (SUBSTR(NEW.TRN_TYPE,1,2) = 'UG') THEN */
  IF (SUBSTRING(NEW.TRN_TYPE FROM 1 FOR 2) = 'UG') THEN
  BEGIN
   EXECUTE PROCEDURE PC_UGXX
    NEW.RECORD_ID ,
    NEW.WH_ID,
    NEW.LOCN_ID,
    NEW.OBJECT,
    NEW.TRN_TYPE,
    NEW.TRN_CODE,
    NEW.TRN_DATE,
    NEW.REFERENCE,
    NEW.QTY,
    NEW.PERSON_ID,
    NEW.DEVICE_ID,
    NEW.INSTANCE_ID;
/*   EXECUTE PROCEDURE TRAN_ARCHIVE; */
  END
 END
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
