COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;


CREATE OR ALTER TRIGGER STOP_DELETE_PICK_DESPATCH FOR PICK_DESPATCH
ACTIVE BEFORE DELETE POSITION 0 
AS
DECLARE VARIABLE WK_OK INTEGER;
BEGIN
   IF ((OLD.DESPATCH_STATUS IS NULL) OR
       (OLD.DESPATCH_STATUS = 'XX') ) THEN
   BEGIN
      WK_OK = 1;
   END
   ELSE
   BEGIN
      WK_OK = 0;
      EXCEPTION NO_DELETE_SO;
   END
END ^


SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;
