
DROP INDEX SYS_LABEL_VAR_NAME_IDX ;

DROP   TRIGGER ADD_SYS_LABEL ;
DROP   TRIGGER ADD_SYS_ASCII ;
DROP   TRIGGER ADD_SYS_LABEL_VAR ;
COMMIT;

ALTER TABLE  SYS_LABEL_VAR DROP LAST_UPDATE_DATE;
ALTER TABLE  SYS_LABEL_VAR DROP LAST_UPDATE_BY;
ALTER TABLE  SYS_LABEL_VAR DROP SL_NAME;
ALTER TABLE  SYS_LABEL_VAR DROP SLV_EXPRESSION;
ALTER TABLE  SYS_LABEL_VAR DROP SLV_DEFAULT;

ALTER TABLE  SYS_LABEL_VAR ADD SL_RECORD_ID INTEGER NOT NULL ;
ALTER TABLE  SYS_LABEL_VAR ADD SLV_DEFAULT CODE_255;
ALTER TABLE  SYS_LABEL_VAR ADD SLV_EXPRESSION CODE_255;
ALTER TABLE  SYS_LABEL_VAR ADD LAST_UPDATE_DATE LAST_UPDATE_DATE;
ALTER TABLE  SYS_LABEL_VAR ADD LAST_UPDATE_BY USER_ID;

CREATE INDEX SYS_LABEL_VAR_NAME_IDX ON SYS_LABEL_VAR(SL_RECORD_ID, SLV_NAME);

COMMIT WORK;
SET AUTODDL OFF;
SET TERM ^ ;


CREATE TRIGGER ADD_SYS_LABEL FOR SYS_LABEL 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_LABEL_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER ADD_SYS_ASCII FOR SYS_ASCII 
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_ASCII_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

CREATE TRIGGER ADD_SYS_LABEL_VAR FOR SYS_LABEL_VAR
ACTIVE BEFORE INSERT POSITION 10 
AS
BEGIN
   IF ((NEW.RECORD_ID IS NULL) OR (NEW.RECORD_ID = 0)) THEN
   BEGIN
      NEW.RECORD_ID  = GEN_ID(SYS_LABEL_VAR_ID_GEN,1);
   END
   NEW.LAST_UPDATE_DATE = 'NOW';
END ^

SET TERM ; ^
COMMIT WORK;
SET AUTODDL ON;

